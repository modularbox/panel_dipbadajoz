<?php

	$completo=false;
	$faltacampo=false;
	
	$guardado="n";
	$id=0;

	$titulof="Gestión Credenciales";   
?>
<!--begin::Content-->
<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
	<!--begin::Subheader-->
	<div class="subheader py-2 py-lg-6 subheader-solid" id="kt_subheader">
		<div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
			<!--begin::Info-->
			<div class="d-flex align-items-center flex-wrap mr-1">
				<!--begin::Page Heading-->
				<div class="d-flex align-items-baseline flex-wrap mr-5">
					<!--begin::Page Title-->
					<h5 class="text-dark font-weight-bold my-1 mr-5">DIP BADAJOZ | Gestión Credenciales</h5>
					<!--end::Page Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">
						<li class="breadcrumb-item">
							<a href="index.php" class="text-muted">Inicio</a>
						</li>
						<li class="breadcrumb-item">
							<a href="index.php?s=19" class="text-muted">Gestión Credenciales</a>
						</li>
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page Heading-->
			</div>
			<!--end::Info-->
			<!--begin::Toolbar-->
			<div class="d-flex align-items-center">
				
			</div>
			<!--end::Toolbar-->
		</div>
	</div>
	<!--end::Subheader-->
	<!--begin::Entry-->
	<div class="d-flex flex-column-fluid">
		<!--begin::Container-->
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					
					 <form class="form" autocomplete="off" method="post" action="index.php?s=19<?php if($id>0){ echo "&i=".$id; } ?>" id="formulario" enctype="multipart/form-data">
						 
						<!--begin::Card-->
						<div class="card card-custom mt-2 gutter-b" data-card="true">
							<div class="card-header">
								<h3 class="card-title">Configurar Pin Credenciales</h3>
								<div class="card-toolbar">
									<!--begin::Button-->
									<?php if($_SESSION["permisossession"]==1 ){?>
                            
                                    <input type="number" class="form-control" style="width:80px;margin-right: 10px;" id="cantidadPinesCredenciales" placeholder="Cantidad"/>
									<a href="#" onClick="obtenerPinesDesdeAlmacenSafey();return false;" class="btn btn-primary font-weight-bolder" style="margin-right: 10px;">
										<i class="la la-plus"></i>Generar pines desde Almacén
									</a>
                                        
									<?php }?>
									<!--end::Button-->
                                    
                                    <a href="#" class="btn btn-icon btn-sm btn-light-primary mr-1" data-card-tool="toggle">
                                        <i class="ki ki-arrow-down icon-nm"></i>
                                    </a>
                                </div>
							</div>
							<div class="card-body">
								<!--begin::Search Form-->
								<div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Pin:</label>
														<input type="text" class="form-control" id="pinCredencialSafey" />
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Pin Serie:</label>
														<input type="text" class="form-control" id="pinserieCredencialSafey" value=""/>
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Pin Serial:</label>
														<input type="text" class="form-control" id="pinSerialCredencialSafey" value=""/>
													</div>
												</div>
                                                <div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<a href="#" class="btn btn-light-primary px-6 font-weight-bold" onClick="crearCredencialPinSafey();return false;">Añadir Manual</a>
													</div>
												</div>
                                                
											</div>
										</div>
										
									</div>
								</div>
                                <div class="form-group mb-5">
                                    <div class="alert alert-custom alert-default" role="alert">
                                        <div class="alert-icon">
                                            <span class="svg-icon svg-icon-primary svg-icon-xl">
                                                <!--begin::Svg Icon | path:assets/media/svg/icons/Tools/Compass.svg-->
                                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                        <rect x="0" y="0" width="24" height="24" />
                                                        <path d="M7.07744993,12.3040451 C7.72444571,13.0716094 8.54044565,13.6920474 9.46808594,14.1079953 L5,23 L4.5,18 L7.07744993,12.3040451 Z M14.5865511,14.2597864 C15.5319561,13.9019016 16.375416,13.3366121 17.0614026,12.6194459 L19.5,18 L19,23 L14.5865511,14.2597864 Z M12,3.55271368e-14 C12.8284271,3.53749572e-14 13.5,0.671572875 13.5,1.5 L13.5,4 L10.5,4 L10.5,1.5 C10.5,0.671572875 11.1715729,3.56793164e-14 12,3.55271368e-14 Z" fill="#000000" opacity="0.3" />
                                                        <path d="M12,10 C13.1045695,10 14,9.1045695 14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 C10,9.1045695 10.8954305,10 12,10 Z M12,13 C9.23857625,13 7,10.7614237 7,8 C7,5.23857625 9.23857625,3 12,3 C14.7614237,3 17,5.23857625 17,8 C17,10.7614237 14.7614237,13 12,13 Z" fill="#000000" fill-rule="nonzero" />
                                                    </g>
                                                </svg>
                                                <!--end::Svg Icon-->
                                            </span>
                                        </div>
                                        <div class="alert-text">Completa la cantidad de pines que quiere asignarle a un cliente.</div>
                                    </div>
                                </div>
                                <div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Cantidad:</label>
														<input type="number" class="form-control" id="cantidadAsignarPinCredencial" />
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Cliente:</label>
                                                        <?php echo cargaUsuariosSafeyCredenciales("","","clienteAsignarPinCredencial",$con);?>
														
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<a href="#" class="btn btn-light-primary px-6 font-weight-bold" onClick="asignarCantidadCredencialPinSafey();return false;">Asignar</a>
													</div>
												</div>
                                                
											</div>
										</div>
									</div>
								</div>
								
								<div class="form-group mb-5">
                                    <div class="alert alert-custom alert-default" role="alert">
                                        <div class="alert-icon">
                                            <span class="svg-icon svg-icon-primary svg-icon-xl">
                                                <!--begin::Svg Icon | path:assets/media/svg/icons/Tools/Compass.svg-->
                                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                        <rect x="0" y="0" width="24" height="24" />
                                                        <path d="M7.07744993,12.3040451 C7.72444571,13.0716094 8.54044565,13.6920474 9.46808594,14.1079953 L5,23 L4.5,18 L7.07744993,12.3040451 Z M14.5865511,14.2597864 C15.5319561,13.9019016 16.375416,13.3366121 17.0614026,12.6194459 L19.5,18 L19,23 L14.5865511,14.2597864 Z M12,3.55271368e-14 C12.8284271,3.53749572e-14 13.5,0.671572875 13.5,1.5 L13.5,4 L10.5,4 L10.5,1.5 C10.5,0.671572875 11.1715729,3.56793164e-14 12,3.55271368e-14 Z" fill="#000000" opacity="0.3" />
                                                        <path d="M12,10 C13.1045695,10 14,9.1045695 14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 C10,9.1045695 10.8954305,10 12,10 Z M12,13 C9.23857625,13 7,10.7614237 7,8 C7,5.23857625 9.23857625,3 12,3 C14.7614237,3 17,5.23857625 17,8 C17,10.7614237 14.7614237,13 12,13 Z" fill="#000000" fill-rule="nonzero" />
                                                    </g>
                                                </svg>
                                                <!--end::Svg Icon-->
                                            </span>
                                        </div>
                                        <div class="alert-text">Filtra un cliente.</div>
                                    </div>
                                </div>
								
								<div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-6 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Filtrar por Cliente:</label>
                                                        <?php echo cargaUsuariosSafeyConfigCredencialesFiltro($con);?>
														
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								
								
                                <div class="blockUI blockMsg blockElement cargadorBloque">
                                    <div class="blockui" id="cargandotablaCredencialesPinSafey">
                                        <span>Cargando...</span>
                                        <span class="spinner spinner-loader spinner-primary"></span>
                                    </div>
                                </div>
								<!--begin: Datatable-->
								<table class="table table-separate table-head-custom table-checkable" style="visibility: hidden" id="tablaCredencialesPinSafey">
									<?php credencialesPinSafeyConfiguracion($con);?>
								</table>
								<!--end: Datatable-->
							</div>
						</div>
						<!--end::Card-->
						
						<!--begin::Card-->
						<div class="card card-custom mt-2 gutter-b" data-card="true">
							<div class="card-header">
								<h3 class="card-title">Configurar Llaves Credenciales</h3>
								<div class="card-toolbar">
									<!--begin::Button-->
									<?php if($_SESSION["permisossession"]==1 ){?>
                                    <input type="number" class="form-control" style="width:80px;margin-right: 10px;" id="cantidadLlavesCredenciales" placeholder="Cantidad"/>
									<a href="#" onClick="obtenerLlavesDesdeAlmacenSafey();return false;" class="btn btn-primary font-weight-bolder" style="margin-right: 10px;">
										<i class="la la-plus"></i>Generar llaves desde Almacén
									</a>
									<?php }?>
									<!--end::Button-->
									
                                    <a href="#" class="btn btn-icon btn-sm btn-light-primary mr-1" data-card-tool="toggle">
                                        <i class="ki ki-arrow-down icon-nm"></i>
                                    </a>
                                </div>
							</div>
							<div class="card-body">
								<!--begin::Search Form-->
								<div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Llave Serie:</label>
														<input type="text" class="form-control" id="llaveSerieCredencialSafey" value=""/>
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Llave Serial:</label>
														<input type="text" class="form-control" id="llaveSerialCredencialSafey" value=""/>
													</div>
												</div>
                                                <div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Tipo:</label>
														<select class="form-control" id="llaveTipoCredencialSafey">
                                                            <option value="1">Tarjeta</option>
                                                            <option value="2">Llaveros</option>
                                                            <option value="3">Taco Metacrilato</option>
                                                            <option value="4">Pulsera</option>
                                                            <option value="5">Etiqueta</option>
                                                            <option value="6">Pegatina</option>
                                                        </select>
													</div>
												</div>
                                                <div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Frecuencia:</label>
														<select class="form-control" id="llaveFrecuenciaCredencialSafey">
                                                            <option value="13.56">13.56 Khz</option>
                                                            <option value="125">125 Khz</option>
                                                        </select>
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
											<a href="#" class="btn btn-light-primary px-6 font-weight-bold" onClick="crearCredencialLlaveSafey();return false;">Añadir</a>
										</div>
									</div>
								</div>
                                <div class="form-group mb-5">
                                    <div class="alert alert-custom alert-default" role="alert">
                                        <div class="alert-icon">
                                            <span class="svg-icon svg-icon-primary svg-icon-xl">
                                                <!--begin::Svg Icon | path:assets/media/svg/icons/Tools/Compass.svg-->
                                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                        <rect x="0" y="0" width="24" height="24" />
                                                        <path d="M7.07744993,12.3040451 C7.72444571,13.0716094 8.54044565,13.6920474 9.46808594,14.1079953 L5,23 L4.5,18 L7.07744993,12.3040451 Z M14.5865511,14.2597864 C15.5319561,13.9019016 16.375416,13.3366121 17.0614026,12.6194459 L19.5,18 L19,23 L14.5865511,14.2597864 Z M12,3.55271368e-14 C12.8284271,3.53749572e-14 13.5,0.671572875 13.5,1.5 L13.5,4 L10.5,4 L10.5,1.5 C10.5,0.671572875 11.1715729,3.56793164e-14 12,3.55271368e-14 Z" fill="#000000" opacity="0.3" />
                                                        <path d="M12,10 C13.1045695,10 14,9.1045695 14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 C10,9.1045695 10.8954305,10 12,10 Z M12,13 C9.23857625,13 7,10.7614237 7,8 C7,5.23857625 9.23857625,3 12,3 C14.7614237,3 17,5.23857625 17,8 C17,10.7614237 14.7614237,13 12,13 Z" fill="#000000" fill-rule="nonzero" />
                                                    </g>
                                                </svg>
                                                <!--end::Svg Icon-->
                                            </span>
                                        </div>
                                        <div class="alert-text">Completa la cantidad de llaves que quiere asignarle a un cliente.</div>
                                    </div>
                                </div>
                                <div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Cantidad:</label>
														<input type="number" class="form-control" id="cantidadAsignarLlaveCredencial" />
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Cliente:</label>
                                                        <?php echo cargaUsuariosSafeyCredenciales("","","clienteAsignarLlaveCredencial",$con);?>
														
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<a href="#" class="btn btn-light-primary px-6 font-weight-bold" onClick="asignarCantidadCredencialLlaveSafey();return false;">Asignar</a>
													</div>
												</div>
                                                
											</div>
										</div>
									</div>
								</div>
                                <div class="blockUI blockMsg blockElement cargadorBloque">
                                    <div class="blockui" id="cargandotablaCredencialesLlaveSafey">
                                        <span>Cargando...</span>
                                        <span class="spinner spinner-loader spinner-primary"></span>
                                    </div>
                                </div>
								<!--begin: Datatable-->
								<table class="table table-separate table-head-custom table-checkable" style="visibility: hidden" id="tablaCredencialesLlaveSafey">
									<?php credencialesLlaveSafeyConfiguracion($con);?>
								</table>
								<!--end: Datatable-->
							</div>
						</div>
						<!--end::Card-->
						
						<!--begin::Card-->
						<div class="card card-custom mt-2 gutter-b" data-card="true">
							<div class="card-header">
								<h3 class="card-title">Configurar Mandos Credenciales</h3>
								<div class="card-toolbar">
									
									<!--begin::Button-->
									<?php if($_SESSION["permisossession"]==1 ){?>
                                    <input type="number" class="form-control" style="width:80px;margin-right: 10px;" id="cantidadMandosCredenciales" placeholder="Cantidad"/>
									<a href="#" onClick="obtenerMandosDesdeAlmacenSafey();return false;" class="btn btn-primary font-weight-bolder" style="margin-right: 10px;">
										<i class="la la-plus"></i>Generar mandos desde Almacén
									</a>
									<?php }?>
									<!--end::Button-->
									
                                    <a href="#" class="btn btn-icon btn-sm btn-light-primary mr-1" data-card-tool="toggle">
                                        <i class="ki ki-arrow-down icon-nm"></i>
                                    </a>
                                </div>
							</div>
							<div class="card-body">
								<!--begin::Search Form-->
								<div class="mb-7">
									<div class="row align-items-center">
										<div class="col-lg-9 col-xl-8">
											<div class="row align-items-center">
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Mando Serie:</label>
														<input type="text" class="form-control" id="mandoserieCredencialSafey" value=""/>
													</div>
												</div>
												<div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<label class="mr-3 mb-0 d-none d-md-block">Mando Serial:</label>
														<input type="text" class="form-control" id="mandoerialCredencialSafey" value=""/>
													</div>
												</div>
                                                <div class="col-md-3 my-2 my-md-0">
													<div class="d-flex align-items-center">
														<a href="#" class="btn btn-light-primary px-6 font-weight-bold" onClick="crearCredencialMandoSafey();return false;">Añadir</a>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
                                <div class="blockUI blockMsg blockElement cargadorBloque">
                                    <div class="blockui" id="cargandotablaCredencialesMandoSafey">
                                        <span>Cargando...</span>
                                        <span class="spinner spinner-loader spinner-primary"></span>
                                    </div>
                                </div>
								<!--begin: Datatable-->
								<table class="table table-separate table-head-custom table-checkable" style="visibility: hidden" id="tablaCredencialesMandoSafey">
									<?php credencialesMandoSafeyConfiguracion($con);?>
								</table>
								<!--end: Datatable-->
							</div>
						</div>
						<!--end::Card-->
						
						<input type="hidden" value="<?php echo $id; ?>" id="accion" name="accion">
                        <input type="hidden" value="<?php echo $guardado; ?>" id="guardado" name="guardado">
                	</form>
					
				</div>
			</div>
		</div>
		<!--end::Container-->
	</div>
	<!--end::Entry-->
</div>
<!--end::Content-->

<script>
    jQuery(document).ready(function() {
		//tabla
        var columnasTablaPin= [null,{ "width": "8%" },{ "width": "8%" },{ "width": "10%" },{ "width": "15%" },{ "width": "26%" },{ "width": "27%" },{ "width": "6%" }];
        cargarTabla.init("tablaCredencialesPinSafey",columnasTablaPin,[0, "asc"],25,false);
		
		var columnasTablaLlave= [null,{ "width": "8%" },{ "width": "8%" },{ "width": "13.25%" },{ "width": "27.25%" },{ "width": "10.62%" },{ "width": "7.62%" },{ "width": "2%" },{ "width": "15.25%" },{ "width": "5%" }];
        cargarTabla.init("tablaCredencialesLlaveSafey",columnasTablaLlave,[0, "asc"],25,false);
		
		var columnasTablaMando= [null,{ "width": "10%" },{ "width": "21.25%" },{ "width": "21.25%" },{ "width": "21.25%" },{ "width": "21.25%" },{ "width": "5%" }];
        cargarTabla.init("tablaCredencialesMandoSafey",columnasTablaMando,[0, "asc"],25,false);
    });
</script>